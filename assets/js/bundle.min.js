"use strict";var _ref=[Date.now(),'target="_blank" rel="noopener noreferrer"'],now=_ref[0],aAttributes=_ref[1],jsonData=void 0,capitalize=function capitalize(word){return word.charAt(0).toUpperCase()+word.slice(1)},likeThis=function likeThis(el){var actualId=el.id,id=actualId.replace(/like-/,"");$.post("api/like.php",{like:id},function(response){if(response.success){var button=$("#"+actualId),likeSpan=button.next("span");likeSpan.text(parseInt(likeSpan.text())+1),button.addClass("thumbs-up")}else response.message&&alert(response.message)})},addLikeEventListeners=function addLikeEventListeners(searchParameter){var likeSelector="";likeSelector=searchParameter?"[id*=search-like-]":"[id*=like-]",$.each($(likeSelector),function(i,el){el.addEventListener("click",function likeHandler(){this.removeEventListener("click",likeHandler,!0),likeThis(el)})})},returnCollectionItem=function returnCollectionItem(file,language,iteration,search){var badgeClass="badge",likeId="";return now-file.added<=6048e5&&(badgeClass+=" new"),search&&(likeId="search-"),likeId+="like-"+language+"-"+iteration,'\n  <li class="collection-item">\n    <a href="'+file.url+'" '+aAttributes+">"+file.title+'</a>\n    <i id="'+likeId+'" class="material-icons">thumb_up</i>\n    <span>'+file.likes+'</span>\n    <a href="'+file.src+'" '+aAttributes+' class="material-icons" title="Source">attachment</a>\n    <span class="'+badgeClass+'">'+file.type+"</span>\n  </li>"},returnTemplateBodyStart=function returnTemplateBodyStart(language,dataset,iteration){return'\n    <li class="flip-in-hor-bottom" style="animation-delay: '+.1*iteration+'s;">\n      <div class="collapsible-header">\n        <i class="material-icons">android</i>\n        '+capitalize(language)+'\n        <span class="badge">'+dataset.length.toLocaleString("en-US")+' items</span>\n      </div>\n      <div class="collapsible-body secondary">\n        <ul class="collection">\n    '},returnTemplateBodyEnding=function returnTemplateBodyEnding(){return"</ul></div></li>"},toggleContentOpacity=function toggleContentOpacity(add){var $content=$("#content");add?$content.addClass("faded"):$content.removeClass("faded")},returnEmptyTemplate=function returnEmptyTemplate(){return'\n      <li class="flip-in-hor-bottom active">\n        <div class="collapsible-header active">\n          <i class="material-icons">sentiment_dissatisfied</i>\n          Sorry, nothing was found...\n          <span class="badge">0 items</span>\n        </div>\n        <div class="collapsible-body secondary">\n          <ul class="collection">\n            <li class="collection-item">\n              call to action - contribute\n            </li>\n          </ul>\n        </div>\n      </li>'},compareSearchResultWithEmpty=function compareSearchResultWithEmpty(template){var strLen=template.length,string=template;return 80!==strLen&&0!==strLen||(string=returnEmptyTemplate(),toggleContentOpacity(!1)),string},returnTemplateContent=function returnTemplateContent(container,search){var string="",iteration=0;return $.each(container,function(language,dataset){string+=returnTemplateBodyStart(language,dataset,iteration),$.each(dataset,function(k,file){string+=returnCollectionItem(file,language,k,search)}),string+=returnTemplateBodyEnding(),iteration+=1}),string=compareSearchResultWithEmpty(string)},searchIterator=function searchIterator(value){var $selectedLanguage=$("#filter-language").val(),_ref2=[{},$("#filter-type").val()],result=_ref2[0],$selectedType=_ref2[1];function performSearch(searchLanguage){var obj={};return $.each(jsonData,function(language,el){if(searchLanguage&&searchLanguage!==language.toLowerCase())return!0;$.each(el,function(i,subObj){var stringifiedObj=JSON.stringify(subObj).toLowerCase();if(null!==$selectedType&&$selectedType!==subObj.type.toLowerCase())return!0;if(stringifiedObj.indexOf(value)>-1){var currentL=0;obj[language]&&(currentL=obj[language].length),currentL>0?obj[language].push(subObj):obj[language]=[subObj]}})}),obj}return"select or reset"===$selectedType&&($selectedType=null),0!==$selectedLanguage.length?$.each($selectedLanguage,function(i,searchLanguage){Object.assign(result,performSearch(searchLanguage))}):result=performSearch(),0===$selectedLanguage.length&&null===$selectedType&&""===value&&(result={}),result},appendFilterOptions=function appendFilterOptions(data){var _ref3=[$("#filter-type"),$("#filter-language"),[]],typeSelector=_ref3[0],languageSelector=_ref3[1],types=_ref3[2],languageString="",typeString="";$.each(data,function(language,obj){languageString+='<option value="'+language.toLowerCase()+'">'+capitalize(language)+"</option>",$.each(obj,function(i,subObj){-1===types.indexOf(subObj.type)&&types.push(subObj.type)})}),$.each(types,function(i,type){typeString+='<option value="'+type.toLowerCase()+'">'+type+"</option>"}),languageSelector.append(languageString),typeSelector.append(typeString)},reinitiateCollapsibles=function reinitiateCollapsibles(){$(".collapsible").off("click.collapse").collapsible()},toggleDividerVisibility=function toggleDividerVisibility(add){var $divider=$("#divider");add?$divider.css("display","block"):$divider.css("display","none")},removePreviousResults=function removePreviousResults(){$("#results").empty(),toggleDividerVisibility("add")},initiateRipple=function initiateRipple(){$.ripple(".collection-item",{debug:!1,on:"mousedown",opacity:.2,color:"auto",multi:!1,duration:.5,rate:function rate(pxPerSecond){return pxPerSecond},easing:"linear"})},search=function search(value){if(0!==$("#results").length&&removePreviousResults(),toggleContentOpacity(!0),0===value.length&&null===$("#filter-language").val()&&null===$("#filter-type").val())$("#results").empty(),toggleDividerVisibility(),toggleContentOpacity();else{var result=searchIterator(value),template=returnTemplateContent(result,!0);$("#results").html(template).css("display","block"),addLikeEventListeners(!0),reinitiateCollapsibles(),initiateRipple()}},addFilterEventListeners=function addFilterEventListeners(){var objs=["#filter-type","#filter-language"];$.each(objs,function(i,el){$(el).change(function(){var _ref4=[[],$(this)],newValuesArr=_ref4[0],select=_ref4[1],ul;select.prev().children("li").toArray().forEach(function(li,k){$(li).hasClass("active")&&newValuesArr.push(select.children("option").toArray()[k].value)}),select.val(newValuesArr),search($("#search").val().toLowerCase())})})};$("#search")[0].addEventListener("input",function searchHandler(){search($(this).val().toLowerCase())}),$.getJSON("api/getJSON.php",function(data){jsonData=data,$("#content").append(returnTemplateContent(jsonData,!1)),appendFilterOptions(jsonData),addFilterEventListeners(),$(".collapsible").collapsible(),$("select").material_select(),addLikeEventListeners(!1),initiateRipple()}),function($,document,Math){$.ripple=function(selector,options){var self=this,_log=self.log=function(){var _console;self.defaults.debug&&console&&console.log&&(_console=console).log.apply(_console,arguments)};self.selector=selector,self.defaults={debug:!1,on:"mousedown",opacity:.4,color:"auto",multi:!1,duration:.7,rate:function rate(pxPerSecond){return pxPerSecond},easing:"linear"},self.defaults=$.extend({},self.defaults,options);var Trigger=function Trigger(e){var $this=$(this),$ripple=void 0,settings=void 0;if($this.addClass("has-ripple"),(settings=$.extend({},self.defaults,$this.data())).multi||!settings.multi&&0===$this.find(".ripple").length){if(($ripple=$("<span></span>").addClass("ripple")).appendTo($this),_log("Create: Ripple"),!$ripple.height()&&!$ripple.width()){var size=Math.max($this.outerWidth(),$this.outerHeight());$ripple.css({height:size,width:size}),_log("Set: Ripple size")}if(settings.rate&&"function"==typeof settings.rate){var rate=Math.round($ripple.width()/settings.duration),filteredRate=settings.rate(rate),newDuration=$ripple.width()/filteredRate;settings.duration.toFixed(2)!==newDuration.toFixed(2)&&(_log("Update: Ripple Duration",{from:settings.duration,to:newDuration}),settings.duration=newDuration)}var color="auto"==settings.color?$this.css("color"):settings.color,css={animationDuration:settings.duration.toString()+"s",animationTimingFunction:settings.easing,background:color,opacity:settings.opacity};_log("Set: Ripple CSS",css),$ripple.css(css)}settings.multi||(_log("Set: Ripple Element"),$ripple=$this.find(".ripple")),_log("Destroy: Ripple Animation"),$ripple.removeClass("ripple-animate");var x=e.pageX-$this.offset().left-$ripple.width()/2,y=e.pageY-$this.offset().top-$ripple.height()/2;settings.multi&&(_log("Set: Ripple animationend event"),$ripple.one("animationend webkitAnimationEnd oanimationend MSAnimationEnd",function(){_log("Note: Ripple animation ended"),_log("Destroy: Ripple"),$(this).remove()})),_log("Set: Ripple location"),_log("Set: Ripple animation"),$ripple.css({top:y+"px",left:x+"px"}).addClass("ripple-animate")};$(document).on(self.defaults.on,self.selector,Trigger)}}(jQuery,document,Math);