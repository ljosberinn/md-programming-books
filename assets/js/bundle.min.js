let _ref=[Date.now(),'target="_blank" rel="noopener noreferrer"'],now=_ref[0],aAttributes=_ref[1],jsonData=void 0;const capitalize=function capitalize(word){return word.charAt(0).toUpperCase()+word.slice(1)},likeThis=function likeThis(el){const actualId=el.id,id=actualId.replace(/like-/,"");$.post("api/like.php",{like:id},response=>{if(response.success){const button=$(`#${actualId}`),likeSpan=button.next("span");likeSpan.text(parseInt(likeSpan.text())+1),button.addClass("thumbs-up")}else response.message&&alert(response.message)})},addLikeEventListeners=function addLikeEventListeners(searchParameter){let likeElements=void 0;likeElements=searchParameter?$("[id*=search-like-]"):$("[id*=like-]"),$.each(likeElements,(i,el)=>{el.addEventListener("click",function likeHandler(){this.removeEventListener("click",likeHandler,!0),likeThis(el)})})},returnCollectionItem=function returnCollectionItem(file,dataset,iteration,search){let badgeClass="badge";now-file.added<=6048e5&&(badgeClass+=" new");let likeId="";return search&&(likeId="search-"),likeId+=`like-${dataset}-${iteration}`,`\n  <li class="collection-item">\n    <a href="${file.url}" ${aAttributes}>${file.title}</a>\n    <i id="${likeId}" class="material-icons">thumb_up</i>\n    <span>${file.likes}</span>\n    <a href="${file.src}" ${aAttributes} class="material-icons" title="Source">attachment</a>\n    <span class="${badgeClass}">${file.type}</span>\n  </li>`},returnTemplateBodyStart=function returnTemplateBodyStart(i,dataset){return`\n    <li>\n      <div class="collapsible-header">\n        <i class="material-icons">android</i>\n        ${capitalize(i)}\n        <span class="badge">${dataset.length.toLocaleString("en-US")} items</span>\n      </div>\n      <div class="collapsible-body secondary">\n        <ul class="collection">\n    `},returnTemplateBodyEnding=function returnTemplateBodyEnding(){return"</ul></div></li>"},toggleContentOpacity=function toggleContentOpacity(add){const content=$("#content");add?content.addClass("faded"):content.removeClass("faded")},compareSearchResultWithEmpty=function compareSearchResultWithEmpty(template){let string=template;return 80===string.length&&(string='\n      <li class="active">\n        <div class="collapsible-header active">\n          <i class="material-icons">sentiment_dissatisfied</i>\n          Sorry, nothing was found...\n          <span class="badge">0 items</span>\n        </div>\n        <div class="collapsible-body secondary">\n          <ul class="collection">\n            <li class="collection-item">\n              call to action - contribute\n            </li>\n          </ul>\n        </div>\n      </li>',toggleContentOpacity(!1)),string},returnTemplateContent=function returnTemplateContent(container,search){let string="";return $.each(container,(i,dataset)=>{string+=returnTemplateBodyStart(i,dataset),$.each(dataset,(k,file)=>{string+=returnCollectionItem(file,i,k,search)}),string+="</ul></div></li>"}),string=compareSearchResultWithEmpty(string)},searchIterator=function searchIterator(value){const result={};return $.each(jsonData,(language,el)=>{language.toLowerCase()===value||language.indexOf(value)>-1?result[language]=el:$.each(el,(i,item)=>{if(item.type.toLowerCase().indexOf(value)>-1||item.title.indexOf(value)>-1){let currentL=0;result[language]&&(currentL=result[language].length),currentL>0?result[language].push(item):result[language]=[item]}})}),result},reinitiateCollapsibles=function reinitiateCollapsibles(){$(".collapsible").off("click.collapse").collapsible()},search=function search(value){const result=searchIterator(value),template=returnTemplateContent(result,!0);$("#results").html(template).css("display","block"),addLikeEventListeners(!0),reinitiateCollapsibles()},toggleDividerVisibility=function toggleDividerVisibility(add){const divider=$("#divider");add?divider.css("display","block"):divider.css("display","none")},removePreviousResults=function removePreviousResults(){$("#results").empty(),toggleDividerVisibility("add")};$("#search")[0].addEventListener("input",function searchHandler(){0!==$("#results").length&&removePreviousResults(),toggleContentOpacity(!0);const searchVal=$(this).val().toLowerCase();search(searchVal)}),$(".button-collapse").sideNav(),$.getJSON("api/getJSON.php",data=>{const template=returnTemplateContent(jsonData=data,!1);$("#content").append(template),$(".collapsible").collapsible(),addLikeEventListeners(!1)});