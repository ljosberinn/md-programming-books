"use strict";var _ref=[Date.now(),'target="_blank" rel="noopener noreferrer"'],now=_ref[0],aAttributes=_ref[1],jsonData=void 0,capitalize=function capitalize(word){return word.charAt(0).toUpperCase()+word.slice(1)},likeThis=function likeThis(el){var actualId=el.id,id=actualId.replace(/like-/,"");$.post("api/like.php",{like:id},function(response){if(response.success){var button=$("#"+actualId),likeSpan=button.next("span");likeSpan.text(parseInt(likeSpan.text())+1),button.addClass("thumbs-up")}else response.message&&alert(response.message)})},addLikeEventListeners=function addLikeEventListeners(searchParameter){var likeSelector="";likeSelector=searchParameter?"[id*=search-like-]":"[id*=like-]",$.each($(likeSelector),function(i,el){el.addEventListener("click",function likeHandler(){this.removeEventListener("click",likeHandler,!0),likeThis(el)})})},returnCollectionItem=function returnCollectionItem(file,language,iteration,search){var badgeClass="badge",likeId="";return now-file.added<=6048e5&&(badgeClass+=" new"),search&&(likeId="search-"),likeId+="like-"+language+"-"+iteration,'\n  <li class="collection-item">\n    <a href="'+file.url+'" '+aAttributes+">"+file.title+'</a>\n    <i id="'+likeId+'" class="material-icons">thumb_up</i>\n    <span>'+file.likes+'</span>\n    <a href="'+file.src+'" '+aAttributes+' class="material-icons" title="Source">attachment</a>\n    <span class="'+badgeClass+'">'+file.type+"</span>\n  </li>"},returnTemplateBodyStart=function returnTemplateBodyStart(language,dataset){return'\n    <li>\n      <div class="collapsible-header">\n        <i class="material-icons">android</i>\n        '+capitalize(language)+'\n        <span class="badge">'+dataset.length.toLocaleString("en-US")+' items</span>\n      </div>\n      <div class="collapsible-body secondary">\n        <ul class="collection">\n    '},returnTemplateBodyEnding=function returnTemplateBodyEnding(){return"</ul></div></li>"},toggleContentOpacity=function toggleContentOpacity(add){var $content=$("#content");add?$content.addClass("faded"):$content.removeClass("faded")},compareSearchResultWithEmpty=function compareSearchResultWithEmpty(template){var string=template;return 80===string.length&&(string='\n      <li class="active">\n        <div class="collapsible-header active">\n          <i class="material-icons">sentiment_dissatisfied</i>\n          Sorry, nothing was found...\n          <span class="badge">0 items</span>\n        </div>\n        <div class="collapsible-body secondary">\n          <ul class="collection">\n            <li class="collection-item">\n              call to action - contribute\n            </li>\n          </ul>\n        </div>\n      </li>',toggleContentOpacity(!1)),string},returnTemplateContent=function returnTemplateContent(container,search){var string="";return $.each(container,function(language,dataset){string+=returnTemplateBodyStart(language,dataset),$.each(dataset,function(k,file){string+=returnCollectionItem(file,language,k,search)}),string+=returnTemplateBodyEnding()}),string=compareSearchResultWithEmpty(string)},searchIterator=function searchIterator(value){var _ref2=[{},$("#filter-type").val(),$("#filter-language").val()],result=_ref2[0],$selectedType=_ref2[1],$selectedLanguage=_ref2[2];return console.log($selectedType,$selectedLanguage),$.each(jsonData,function(language,el){$.each(el,function(i,subObj){var stringifiedObj;if(JSON.stringify(subObj).toLowerCase().indexOf(value)>-1){var currentL=0;result[language]&&(currentL=result[language].length),currentL>0?result[language].push(subObj):result[language]=[subObj]}})}),result},appendFilterOptions=function appendFilterOptions(data){var _ref3=[$("#filter-type"),$("#filter-language"),[]],typeSelector=_ref3[0],languageSelector=_ref3[1],types=_ref3[2],languageString="",typeString="";$.each(data,function(language,obj){languageString+='<option value="'+language.toLowerCase()+'">'+capitalize(language)+"</option>",$.each(obj,function(i,subObj){-1===types.indexOf(subObj.type)&&types.push(subObj.type)})}),$.each(types,function(i,type){typeString+='<option value="'+type.toLowerCase()+'">'+type+"</option>"}),languageSelector.append(languageString),typeSelector.append(typeString)},reinitiateCollapsibles=function reinitiateCollapsibles(){$(".collapsible").off("click.collapse").collapsible()},toggleDividerVisibility=function toggleDividerVisibility(add){var $divider=$("#divider");add?$divider.css("display","block"):$divider.css("display","none")},search=function search(value){if(0===value.length)$("#results").empty(),toggleDividerVisibility(),toggleContentOpacity();else{var result=searchIterator(value),template=returnTemplateContent(result,!0);$("#results").html(template).css("display","block"),addLikeEventListeners(!0),reinitiateCollapsibles()}},removePreviousResults=function removePreviousResults(){$("#results").empty(),toggleDividerVisibility("add")},addFilterEventListeners=function addFilterEventListeners(){var objs=["#filter-type","#filter-language"];$,$.each(objs,function(i,el){$(el).change(function(){var _ref4=[[],$(this)],newValuesArr=_ref4[0],select=_ref4[1],ul;select.prev().children("li").toArray().forEach(function(li,i){$(li).hasClass("active")&&newValuesArr.push(select.children("option").toArray()[i].value)}),select.val(newValuesArr),search($("#search").val().toLowerCase())})})};$("#search")[0].addEventListener("input",function searchHandler(){0!==$("#results").length&&removePreviousResults(),toggleContentOpacity(!0),search($(this).val().toLowerCase())}),$.getJSON("api/getJSON.php",function(data){jsonData=data,$("#content").append(returnTemplateContent(jsonData,!1)),appendFilterOptions(jsonData),addFilterEventListeners(),$(".collapsible").collapsible(),$("select").material_select(),addLikeEventListeners(!1)});